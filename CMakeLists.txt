CMAKE_MINIMUM_REQUIRED( VERSION 2.8 )

INCLUDE( "${CMAKE_SOURCE_DIR}/PROJECTINFO.cmake" )

SET( BUILDTOOLS_DIR "buildtools/" )

IF( NOT PREFIX )
  SET( PREFIX "/usr" )
ENDIF( NOT PREFIX )

IF( PLUGINNAME )
  SET( BUILDTOOLS_DIR "${PREFIX}/share/lib${BASELIB}/${BUILDTOOLS_DIR}" )
ELSE( PLUGINNAME )
  SET( BUILDTOOLS_DIR "${CMAKE_SOURCE_DIR}/${BUILDTOOLS_DIR}" )
ENDIF( PLUGINNAME )

SET( CMAKE_MODULE_PATH "${CMAKE_SOURCE_DIR}/cmake/Modules" "${BUILDTOOLS_DIR}" "${CMAKE_MODULE_PATH}" )

INCLUDE( LibyuiCommon )
INCLUDE( "${CMAKE_CURRENT_SOURCE_DIR}/VERSION.cmake" )

INITIALIZE()

PROJECT( "${PROJECTNAME}" )

INCLUDE( "${CMAKE_CURRENT_SOURCE_DIR}/SOURCECONF.cmake" )

SET_OPTIONS()
SET_ENVIRONMENT()
SET_BUILD_FLAGS()
SET_AUTODOCS()

IF( NOT DOCS_ONLY )
  FIND_LIB_DEPENDENCIES()
  FIND_LINKER_LIBS()
  CHECK_PREFIX()
  SET_SUBDIRS()
  GEN_EXPORTS()
  GEN_FILES()
  PREP_SPEC_FILES()
  SET_INSTALL_TARGET()
  PREP_OBS_TARBALL()
ENDIF( NOT DOCS_ONLY )

SUMMARY()
